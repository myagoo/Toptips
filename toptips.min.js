(function(a,b,c){a.fn.toptips=function(d){var e=a.extend({delay:100,arrowWidth:3,borderWidth:3,width:"auto",borderColor:"grey",background:"white"},d);var f=function(c,d){var f=d.offset();var g=c.find(".toptip-arrow");var h=c.find(".toptip-content");var i={left:f.left+d.outerWidth()/2-c.outerWidth()/2,top:f.top-c.outerHeight()-e.arrowWidth};if(i.top<a(b).scrollTop()){i.top=f.top+d.outerHeight()+e.arrowWidth;g.css({top:"",bottom:"100%",borderTopWidth:0,borderBottomWidth:e.arrowWidth+e.borderWidth})}else{g.css({top:"100%",bottom:"",borderTopWidth:e.arrowWidth+e.borderWidth,borderBottomWidth:0})}g.css("left",h.innerWidth()/2-g.outerWidth()/2);return c.offset(i)};var g=function(b){var c=a('<div class="toptip-arrow"></div>').css({position:"absolute",width:0,height:0,border:"solid "+e.borderColor,borderLeft:e.borderWidth+e.arrowWidth+"px solid transparent",borderRight:e.borderWidth+e.arrowWidth+"px solid transparent"});var d=a('<div class="toptip-content">'+b.data("toptip")+"</div>").css({position:"relative",background:e.background,margin:e.borderWidth,borderRadius:"4px",padding:"4px"});var f=a('<div class="toptip-wrapper"></div>').css({position:"absolute",display:"none",borderRadius:"5px",background:e.borderColor,width:e.width}).hover(function(){a(this).stop(true,true).fadeIn()},function(){a(this).delay(e.delay).fadeOut()});return f.append(d.append(c))};return this.each(function(){var b;a(this).hover(function(){if(b==c){b=g(a(this))}f(b.appendTo("body").stop(true,true).fadeIn(),a(this))},function(){b.delay(e.delay).fadeOut()})})}})(jQuery,document)